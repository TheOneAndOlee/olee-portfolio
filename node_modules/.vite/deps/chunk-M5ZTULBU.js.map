{
  "version": 3,
  "sources": ["../../svelte-typewriter/package/modes/loopOnce.js"],
  "sourcesContent": ["import { animationSetup } from '../helpers/animationSetup'\r\nimport { writeEffect } from '../helpers/writeEffect'\r\nimport { typingInterval } from '../helpers/typingInterval'\r\nimport { unwriteEffect } from '../helpers/unwriteEffect'\r\nimport { runOnEveryParentUntil } from '../helpers/runOnEveryParentUntil'\r\n\r\n/**\r\n * @typedef {object} Props\r\n * @property {number} [interval]\r\n * @property {boolean} [cursor]\r\n * @property {boolean} [keepCursorOnFinish]\r\n * @property {number} [delay]\r\n * @property {boolean} [showCursorOnDelay]\r\n * @property {boolean} [disabled]\r\n * @property {string} [element]\r\n * @property {number} [scrambleDuration]\r\n * @property {number} [scrambleSlowdown]\r\n * @property {number} [unwriteInterval]\r\n * @property {number} [wordInterval]\r\n */\r\n\r\n/**\r\n * @typedef {{ update: () => void, destroy: () => void }} SvelteActionReturnType\r\n */\r\n\r\n/**\r\n * @typedef {(node: HTMLElement, props: Props) => SvelteActionReturnType} TypewriterModeFn\r\n */\r\n\r\n/**\r\n * @type {TypewriterModeFn}\r\n */\r\nconst loopOnce = async (node, props) => {\r\n\tconst { options, elements } = animationSetup(node, props)\r\n\r\n\tfor (const element of elements) {\r\n\t\tconst { currentNode, text } = element\r\n\r\n\t\tawait writeEffect(element, options)\r\n\t\tconst textWithUnescapedAmpersands = text.replaceAll('&', '&amp;')\r\n\r\n\t\tconst fullyWritten = currentNode.innerHTML === textWithUnescapedAmpersands\r\n\r\n\t\tif (fullyWritten) {\r\n\t\t\toptions.dispatch('done')\r\n\t\t\tawait typingInterval(options.wordInterval)\r\n\r\n\t\t\tconst isLastElement = elements.indexOf(element) === elements.length - 1\r\n\r\n\t\t\tif (!isLastElement) {\r\n\t\t\t\tawait unwriteEffect(currentNode, options)\r\n\t\t\t\trunOnEveryParentUntil(currentNode, options.parentElement, element => {\r\n\t\t\t\t\tcurrentNode === element\r\n\t\t\t\t\t\t? element.classList.remove('typing')\r\n\t\t\t\t\t\t: element.classList.remove('finished-typing')\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\trunOnEveryParentUntil(currentNode, options.parentElement, element => {\r\n\t\t\t\tconst cursorHasTimeout = typeof options.keepCursorOnFinish === 'number'\r\n\t\t\t\tcursorHasTimeout &&\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\telement.classList.replace('typing', 'finished-typing')\r\n\t\t\t\t\t}, options.keepCursorOnFinish)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tupdate() {},\r\n\t\tdestroy() {}\r\n\t}\r\n}\r\n\r\nexport default loopOnce\r\n"],
  "mappings": ";;;;;;;;;;;;;AAgCA,IAAM,WAAW,OAAO,MAAM,UAAU;AACvC,QAAM,EAAE,SAAS,SAAS,IAAI,eAAe,MAAM,KAAK;AAExD,aAAW,WAAW,UAAU;AAC/B,UAAM,EAAE,aAAa,KAAK,IAAI;AAE9B,UAAM,YAAY,SAAS,OAAO;AAClC,UAAM,8BAA8B,KAAK,WAAW,KAAK,OAAO;AAEhE,UAAM,eAAe,YAAY,cAAc;AAE/C,QAAI,cAAc;AACjB,cAAQ,SAAS,MAAM;AACvB,YAAM,eAAe,QAAQ,YAAY;AAEzC,YAAM,gBAAgB,SAAS,QAAQ,OAAO,MAAM,SAAS,SAAS;AAEtE,UAAI,CAAC,eAAe;AACnB,cAAM,cAAc,aAAa,OAAO;AACxC,8BAAsB,aAAa,QAAQ,eAAe,CAAAA,aAAW;AACpE,0BAAgBA,WACbA,SAAQ,UAAU,OAAO,QAAQ,IACjCA,SAAQ,UAAU,OAAO,iBAAiB;AAAA,QAC9C,CAAC;AAAA,MACF;AAEA,4BAAsB,aAAa,QAAQ,eAAe,CAAAA,aAAW;AACpE,cAAM,mBAAmB,OAAO,QAAQ,uBAAuB;AAC/D,4BACC,WAAW,MAAM;AAChB,UAAAA,SAAQ,UAAU,QAAQ,UAAU,iBAAiB;AAAA,QACtD,GAAG,QAAQ,kBAAkB;AAAA,MAC/B,CAAC;AAAA,IACF;AAAA,EACD;AAEA,SAAO;AAAA,IACN,SAAS;AAAA,IAAC;AAAA,IACV,UAAU;AAAA,IAAC;AAAA,EACZ;AACD;AAEA,IAAO,mBAAQ;",
  "names": ["element"]
}
